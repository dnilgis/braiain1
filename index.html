<!DOCTYPE html>
<!-- v1764461347 FORCE REFRESH -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braiain AI Speed Index | Daily LLM Benchmarks</title>
    <meta name="description" content="Real-time AI model speed benchmarks. Compare OpenAI, Anthropic, Google Gemini, Groq, and more API latency performance updated daily.">
    
    <!-- SEO Meta Tags -->
    <meta name="keywords" content="AI benchmarks, LLM speed test, OpenAI GPT-4, Claude API, Gemini speed, Groq performance, AI API comparison">
    <meta name="author" content="Braiain AI Speed Index">
    <meta name="robots" content="index, follow">
    
    <!-- Google Analytics GA4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1Y5SESHWEE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1Y5SESHWEE');
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --bg-primary: #f5f5f7;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f9f9f9;
            --text-primary: #1c1c1c;
            --text-secondary: #555;
            --text-tertiary: #777;
            --border-color: #e0e0e0;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 6px 16px rgba(0,0,0,0.15);
        }
        
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #252525;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --text-tertiary: #888;
            --border-color: #404040;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
            --shadow-lg: 0 6px 16px rgba(0,0,0,0.5);
        }
        
        * { box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        
        header {
            background-color: #1c1c1c;
            color: white;
            text-align: center;
            padding: 30px 20px 20px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.05);
        }
        
        h1 { font-size: 2.4em; margin: 0 0 8px 0; }
        .tagline { font-size: 1.1em; color: #c0c0c0; margin: 0; }
        
        .controls-bar {
            max-width: 1200px;
            margin: 20px auto;
            padding: 15px 20px;
            background: var(--bg-secondary);
            border-radius: 8px;
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow-sm);
        }
        
        .sort-btn {
            padding: 10px 20px;
            border: 2px solid #2196f3;
            background: var(--bg-secondary);
            color: #2196f3;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 0.95em;
        }
        
        .sort-btn.active {
            background: #2196f3;
            color: white;
        }
        
        .sort-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #4caf50;
            background: var(--bg-secondary);
            color: #4caf50;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 0.95em;
            margin-left: 10px;
        }
        
        .filter-btn.active {
            background: #4caf50;
            color: white;
        }
        
        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        .about-section { 
            max-width: 1200px; 
            margin: 20px auto; 
            padding: 0 20px; 
        }
        
        h2 { 
            color: var(--text-primary);
            font-size: 1.5em; 
            margin-top: 30px; 
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px; 
        }
        
        .data-source-indicator {
            max-width: 1200px;
            margin: 10px auto;
            padding: 10px 20px;
            text-align: center;
            font-size: 0.9em;
            border-radius: 4px;
        }
        
        .data-live {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .data-fallback {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .leaderboard-cards-wrapper {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px; 
            justify-content: center;
            align-items: flex-start; 
        }

        .model-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            width: 100%;
            max-width: 360px;
            box-shadow: var(--shadow-md);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .rank-badge {
            background-color: #666;
            color: white;
            padding: 6px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
            flex-shrink: 0;
            min-width: 45px;
            text-align: center;
        }
        
        .rank-badge.rank-1 { 
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); 
            color: #1c1c1c;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
        }
        .rank-badge.rank-2 { 
            background: linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%); 
            color: #1c1c1c;
            box-shadow: 0 2px 8px rgba(192, 192, 192, 0.4);
        }
        .rank-badge.rank-3 { 
            background: linear-gradient(135deg, #cd7f32 0%, #e6a85c 100%); 
            color: #1c1c1c;
            box-shadow: 0 2px 8px rgba(205, 127, 50, 0.4);
        }
        
        .provider-model-wrapper {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
            overflow: hidden; 
            flex: 1;
        }
        
        .card-provider { font-size: 1.3em; font-weight: 700; }
        .card-model { font-size: 0.9em; color: var(--text-secondary); word-break: break-word; }

        .stats-wrapper {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px 0;
        }
        
        .stat-group { text-align: center; }
        
        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1.1;
        }
        
        .stat-label { 
            font-size: 0.75em; 
            color: var(--text-tertiary);
            text-transform: uppercase; 
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .speed-fast, .tps-fast { color: #2e7d32; }
        .speed-medium, .tps-medium { color: #f57c00; }
        .speed-slow, .tps-slow { color: #c62828; }
        
        .status-online { color: #2e7d32; }
        .status-error { color: #c62828; }
        
        .cost-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
            margin-top: 5px;
        }
        
        .cost-free { background-color: #e8f5e9; color: #2e7d32; }
        .cost-cheap { background-color: #fff3e0; color: #f57c00; }
        .cost-expensive { background-color: #ffebee; color: #c62828; }

        /* RESPONSE PREVIEW AT BOTTOM */
                .response-preview-bottom {
            margin: 15px 0 0 0;
            padding: 12px;
            padding-bottom: 35px;  /* Space for expand button */
            background: var(--bg-tertiary);
            border-radius: 6px;
            border-left: 3px solid #2196f3;
            font-size: 0.85em;
            line-height: 1.5;
            color: var(--text-secondary);
            max-height: 120px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: max-height 0.4s ease, box-shadow 0.3s;
            word-wrap: break-word;
            white-space: pre-wrap;
        }
        
        .response-preview-bottom.expanded {
            max-height: 2000px;
            cursor: default;
        }
        
        .response-preview-bottom:hover {
            box-shadow: var(--shadow-sm);
            border-left-color: #1976d2;
        }
        
                .response-preview-bottom::after {
            content: '‚ñº Click to expand';
            position: absolute;
            bottom: 5px;
            right: 10px;
            font-size: 0.75em;
            color: #2196f3;
            font-weight: 600;
            background: var(--bg-tertiary);
            padding: 3px 8px;
            border-radius: 3px;
        }
        
        .response-preview-bottom.expanded::after {
            content: '‚ñ≤ Click to collapse';
        }
        
        .copy-btn {
            position: absolute;
            bottom: 8px;
            left: 10px;
            padding: 5px 12px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s, background 0.2s;
            z-index: 10;
        }
        
        .response-preview-bottom.expanded .copy-btn {
            opacity: 1;
        }
        
        .copy-btn:hover {
            background: #1976d2;
            transform: scale(1.05);
        }
        
        /* MODAL OVERLAY */
        
        
        
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        
        
        
        
        
        
        
        
        
        
        
        
        .char-count-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }
        
        .char-ok { background: #e8f5e9; color: #2e7d32; }
        .char-warn { background: #fff3cd; color: #856404; }
        .char-over { background: #ffebee; color: #c62828; }
        .char-short { background: #e3f2fd; color: #1976d2; }

        .badge-container {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin: 10px 0;
        }
        
        .badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-fastest { background-color: #ffd700; color: #1c1c1c; }
        .badge-best-value { background-color: #4caf50; color: white; }
        .badge-highest-tps { background-color: #2196f3; color: white; }

        .affiliate-btn {
            background-color: #2196f3;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.95em;
            transition: background-color 0.2s, transform 0.1s;
            text-align: center;
            margin-top: 10px;
            display: block;
            border: none;
            cursor: pointer;
        }
        
        .affiliate-btn:hover { 
            background-color: #1976d2;
            transform: translateY(-2px);
        }

        #last-updated-wrapper { 
            text-align: center; 
            margin: 30px auto; 
            font-size: 1em; 
            color: var(--text-tertiary);
            padding: 0 20px;
        }
        
        .adsense-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            text-align: center;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .adsense-label {
            font-size: 0.75em;
            color: #999;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .chart-section {
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 20px;
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .chart-btn {
            padding: 8px 16px;
            border: 2px solid #2196f3;
            background: var(--bg-secondary);
            color: #2196f3;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .chart-btn.active {
            background: #2196f3;
            color: white;
        }
        
        .chart-btn:hover {
            transform: translateY(-2px);
        }
        
        #site-footer { 
            background-color: #1c1c1c; 
            color: #c0c0c0; 
            padding: 30px 20px; 
            text-align: center; 
            font-size: 0.9em; 
            margin-top: 60px; 
        }
        
        #site-footer a { color: #007bff; text-decoration: none; font-weight: bold; }
        #site-footer a:hover { text-decoration: underline; }
        .legal-text { margin-top: 15px; font-size: 0.8em; color: #999; line-height: 1.5; }

        .loading-container { width: 100%; text-align: center; padding: 40px 20px; }
        .loading-spinner {
            border: 4px solid var(--border-color);
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            .model-card { max-width: 100%; }
            .stats-wrapper { grid-template-columns: repeat(2, 1fr); }
            .stat-group:last-child { grid-column: 1 / -1; }
            .chart-container { height: 300px; }
            .controls-bar { padding: 10px; }
            .theme-toggle { position: static; margin: 10px auto; display: block; width: fit-content; }
            header { padding: 15px; }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">üåì</button>
        <h1>ü§ñ Braiain AI Speed Index</h1>
        <p class="tagline">Real-World LLM Speed, Cost & Performance Tracking</p>
    </header>

    <div id="data-source-indicator"></div>

    <section class="about-section">
        <p>
            Welcome to the <strong>Braiain Speed Index</strong>, featuring automated daily benchmarks of <strong>API speed, tokens-per-second, and cost efficiency</strong> across major AI providers. <strong>Make informed decisions with real data.</strong>
        </p>
    </section>

    <!-- SORT CONTROLS ONLY -->
    <div class="controls-bar">
        <strong>Sort by:</strong>
        <button class="sort-btn active" onclick="sortResults('speed')">‚ö° Speed</button>
        <button class="sort-btn" onclick="sortResults('tps')">üöÄ TPS</button>
        <button class="sort-btn" onclick="sortResults('cost')">üí∞ Cost</button>
        <button class="filter-btn" onclick="toggleFreeFilter()" id="filter-free">‚ú® FREE ONLY</button>
    </div>

    <!-- LEADERBOARD CARDS -->
    <div class="leaderboard-cards-wrapper" id="results-container">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p>Loading benchmark data...</p>
        </div>
    </div>
    
    <div id="last-updated-wrapper">
        <span id="last-updated"></span>
    </div>

    <!-- MODAL FOR FULL RESPONSE -->
    <!-- GOOGLE ADSENSE -->
    <div class="adsense-container">
        <div class="adsense-label">Advertisement</div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2906493623732277"
             crossorigin="anonymous"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2906493623732277"
             data-ad-slot="5895952530"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <!-- TREND CHART SECTION -->
    <section class="chart-section" id="chart-section" style="display: none;">
        <h2>üìà Performance Trends</h2>
        <p style="color: var(--text-tertiary); font-size: 0.9em; margin-bottom: 10px;">Historical speed comparison - lower is better</p>
        
        <div class="chart-controls">
            <button class="chart-btn active" onclick="updateChartRange(7)">7 Days</button>
            <button class="chart-btn" onclick="updateChartRange(30)">30 Days</button>
            <button class="chart-btn" onclick="updateChartRange(0)">All Time</button>
        </div>
        
        <div class="chart-container">
            <canvas id="trendChart"></canvas>
        </div>
    </section>

    <section class="about-section">
        <h2>üî¨ Methodology</h2>
        <p>
            We measure <strong>end-to-end API latency</strong> using identical prompts across all models. Each test generates ~300 tokens and tracks speed, throughput (tokens/second), and cost per request. All models must provide responses between 1000-1200 characters with complete sentences.
        </p>
        
        <h2>üìä Metrics Explained</h2>
        <ul>
            <li><strong>Speed (seconds):</strong> Total time from request to response - lower is better</li>
            <li><strong>TPS (Tokens Per Second):</strong> Throughput metric - higher is better</li>
            <li><strong>Cost Per Request:</strong> Approximate cost based on current API pricing</li>
            <li><strong>Character Count:</strong> Response length (target: 1000-1200 characters)</li>
        </ul>
    </section>

    <footer id="site-footer">
        <div>A <a href="/cdn-cgi/l/email-protection#14707a7d78737d67547379757d783a777b7937212727232770277527722720277526242527272027712726277527722370272427772771">dnilgis</a> project.</div>
        <div class="legal-text">
            <strong>Legal Disclaimer:</strong> Benchmark data provided for informational purposes only. Pricing and performance may vary. All product names and brands are property of their respective owners.
        </div>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // EMBEDDED FALLBACK DATA
        const FALLBACK_DATA = {
            "last_updated": "2025-11-28 21:56:17 UTC",
            "prompt": "Write a complete, three-paragraph summary of the history of the internet, ending with a prediction for 2030. STRICT REQUIREMENTS: (1) Your response must be EXACTLY 1000-1200 characters - no more, no less. (2) You MUST end with a complete sentence - no partial thoughts. (3) Count your characters as you write and plan accordingly. (4) If you reach 1150 characters, wrap up your final sentence by character 1200. This is a hard limit - responses outside 1000-1200 characters will be rejected.",
            "max_tokens": 300,
            "results": [
                {"provider": "Groq", "model": "Llama 3.1 70B", "time": 0.53, "status": "Online", "response_preview": "The internet originated in the 1960s as a US military project, ARPANET, designed to create a decentralized communication network. By the 1980s, TCP/IP protocols standardized data transmission, enabling global connectivity. The 1990s saw the World Wide Web's emergence, revolutionizing information access through browsers like Mosaic and Netscape.\n\nThe 2000s brought social media platforms, smartphones, and cloud computing, transforming daily life. Web 2.0 enabled user-generated content, e-commerce exploded, and streaming services changed entertainment consumption. Mobile internet access became ubiquitous, connecting billions worldwide.\n\nBy 2030, the internet will likely integrate AI assistants seamlessly into daily tasks, expand through satellite networks to reach remote areas, and enable immersive virtual reality experiences. Quantum computing may revolutionize encryption and data processing, while IoT devices create interconnected smart cities. Privacy concerns and digital governance will shape the internet's evolution, balancing innovation with security and individual rights in an increasingly connected world.", "tokens_per_second": 176, "output_tokens": 479, "character_count": 1087, "cost_per_request": 0.0},
                {"provider": "OpenAI", "model": "GPT-4o Mini", "time": 6.08, "status": "Online", "response_preview": "The internet's origins trace back to the 1960s with ARPANET, a U.S. Department of Defense project designed to enable communication between computers. The 1980s saw the development of TCP/IP protocols, standardizing data transmission and laying the groundwork for modern networking. The World Wide Web, created by Tim Berners-Lee in 1989, revolutionized access to information, making the internet user-friendly and widely accessible by the 1990s.\n\nThe 2000s marked explosive growth with social media platforms like Facebook and Twitter, e-commerce giants like Amazon, and the rise of mobile internet through smartphones. Cloud computing transformed business operations, while streaming services like Netflix changed entertainment consumption. The internet became integral to daily life, connecting billions globally.\n\nBy 2030, the internet will likely feature ubiquitous AI integration, seamless virtual and augmented reality experiences, and expanded Internet of Things ecosystems. Enhanced 6G networks will enable near-instantaneous global communication, while blockchain technologies may decentralize control and improve security. The internet will continue evolving as humanity's primary platform for connection, commerce, and innovation.", "tokens_per_second": 44, "output_tokens": 300, "character_count": 1172, "cost_per_request": 0.0002},
                {"provider": "Anthropic", "model": "Claude 3.5 Sonnet", "time": 99.9999, "status": "API FAILURE", "response_preview": "All model versions failed", "tokens_per_second": 0, "output_tokens": 0, "character_count": 0, "cost_per_request": null},
                {"provider": "Google", "model": "Gemini 1.5 Pro", "time": 99.9999, "status": "API FAILURE", "response_preview": "All model versions failed", "tokens_per_second": 0, "output_tokens": 0, "character_count": 0, "cost_per_request": null}
            ],
            "history": [
                {"timestamp": "2025-11-21 00:00:00 UTC", "results": {"Groq": {"time": 2.1, "tps": 220, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 6.5, "tps": 46, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-22 00:00:00 UTC", "results": {"Groq": {"time": 1.8, "tps": 265, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 6.2, "tps": 48, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-23 00:00:00 UTC", "results": {"Groq": {"time": 1.4, "tps": 340, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 6.0, "tps": 50, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-24 00:00:00 UTC", "results": {"Groq": {"time": 1.3, "tps": 370, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 7.0, "tps": 43, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-25 00:00:00 UTC", "results": {"Groq": {"time": 2.3, "tps": 215, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 7.0, "tps": 43, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-26 00:00:00 UTC", "results": {"Groq": {"time": 1.8, "tps": 255, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 10.0, "tps": 30, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-27 00:00:00 UTC", "results": {"Groq": {"time": 2.0, "tps": 235, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 6.6, "tps": 45, "status": "Online", "cost": 0.000185}}},
                {"timestamp": "2025-11-28 21:56:17 UTC", "results": {"Groq": {"time": 0.53, "tps": 176, "status": "Online", "cost": 0.0}, "OpenAI": {"time": 6.08, "tps": 44, "status": "Online", "cost": 0.0002}, "Anthropic": {"time": 99.9999, "tps": 0, "status": "API FAILURE", "cost": null}, "Google": {"time": 99.9999, "tps": 0, "status": "API FAILURE", "cost": null}}}
            ]
        };

        const AFFILIATE_LINKS = {"OpenAI": "https://platform.openai.com/signup", "Google": "https://ai.google.dev/", "Anthropic": "https://console.anthropic.com/", "Groq": "https://console.groq.com/", "Mistral AI": "https://console.mistral.ai/", "Cohere": "https://dashboard.cohere.com/", "Together AI": "https://api.together.xyz/"};
        const PROVIDER_COLORS = {"OpenAI": "#10a37f", "Anthropic": "#d97757", "Google": "#4285f4", "Groq": "#f55036", "Mistral AI": "#ff7000", "Cohere": "#39594d", "Together AI": "#6366f1"};

        let dataSource = "loading", trendChart = null, currentChartRange = 7, fullHistoryData = [];
        let currentSort = 'speed', allResults = [];

        // THEME TOGGLE
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'theme_toggle', {event_category: 'ui', event_label: newTheme});
            }
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);

        // MODAL FUNCTIONS
        function toggleResponse(element) {
            element.classList.toggle('expanded');
            if (typeof gtag !== 'undefined') {
                const action = element.classList.contains('expanded') ? 'expand' : 'collapse';
                gtag('event', 'response_' + action, {event_category: 'engagement'});
            }
        }

        

        function setDataSourceIndicator(source, data) {
            const indicator = document.getElementById("data-source-indicator");
            indicator.className = "data-source-indicator data-" + source;
            indicator.innerHTML = source === "live" ? `‚úÖ <strong>Live Data</strong> - Updated: ${data.last_updated} | Auto-refreshes every 6 hours` : `‚ö†Ô∏è <strong>Using Cached Data</strong> - Last snapshot: ${data.last_updated}`;
        }

        function escapeHtml(text) { const div = document.createElement("div"); div.textContent = text; return div.innerHTML; }
        function getSpeedClass(time, isOnline) { return !isOnline ? "status-error" : time < 5 ? "speed-fast" : time < 10 ? "speed-medium" : "speed-slow"; }
        function getTpsClass(tps) { return tps > 60 ? "tps-fast" : tps > 30 ? "tps-medium" : "tps-slow"; }
        function getCostClass(cost) { return cost === null || cost === 0 ? "cost-free" : cost < 0.001 ? "cost-cheap" : "cost-expensive"; }
        function formatCost(cost) { return cost === null ? "N/A" : cost === 0 ? "FREE" : cost < 0.0001 ? "<$0.0001" : `$${cost.toFixed(4)}`; }
        
        function getCharCountClass(charCount) {
            if (!charCount || charCount === 0) return 'char-short';
            if (charCount < 1000) return 'char-short';
            if (charCount <= 1200) return 'char-ok';
            return 'char-over';
        }

        function createTrendChart(history, range = 7) {
            const ctx = document.getElementById("trendChart"), chartSection = document.getElementById("chart-section");
            if (!ctx || !history || history.length < 2) { if (chartSection) chartSection.style.display = "none"; return; }
            if (chartSection) chartSection.style.display = "block";
            fullHistoryData = history;
            const recentHistory = range > 0 ? history.slice(-range) : history, labels = [], datasets = {};
            recentHistory.forEach(entry => {
                const date = new Date(entry.timestamp);
                labels.push(date.toLocaleDateString("en-US", {month: "short", day: "numeric"}));
                Object.keys(entry.results).forEach(provider => {
                    if (!datasets[provider]) datasets[provider] = {label: provider, data: [], borderColor: PROVIDER_COLORS[provider] || "#999", backgroundColor: PROVIDER_COLORS[provider] || "#999", tension: 0.3, spanGaps: true, pointRadius: 4, pointHoverRadius: 6};
                    const time = entry.results[provider].time;
                    datasets[provider].data.push(time < 99 && entry.results[provider].status === "Online" ? time : null);
                });
            });
            if (trendChart) trendChart.destroy();
            trendChart = new Chart(ctx, {type: "line", data: {labels: labels, datasets: Object.values(datasets)}, options: {responsive: true, maintainAspectRatio: false, plugins: {legend: {position: "top", labels: {usePointStyle: true, padding: 15}}, tooltip: {callbacks: {label: function(context) { if (context.parsed.y === null) return null; return context.dataset.label + ": " + context.parsed.y.toFixed(2) + "s"; }}}}, scales: {y: {beginAtZero: true, title: {display: true, text: "Response Time (seconds)"}, grid: {color: "rgba(0, 0, 0, 0.05)"}}, x: {grid: {display: false}}}, interaction: {mode: "index", intersect: false}}});
        }

        function updateChartRange(range) {
            currentChartRange = range;
            document.querySelectorAll(".chart-btn").forEach(btn => btn.classList.remove("active"));
            event.target.classList.add("active");
            if (fullHistoryData.length > 0) createTrendChart(fullHistoryData, range);
        }

        function calculateBadges(results) {
            if (results.length === 0) return {};
            const online = results.filter(r => r.status === "Online");
            if (online.length === 0) return {};
            const badges = {};
            const fastest = online.reduce((min, r) => r.time < min.time ? r : min);
            badges[fastest.provider] = badges[fastest.provider] || [];
            badges[fastest.provider].push("fastest");
            const highestTps = online.reduce((max, r) => r.tokens_per_second > max.tokens_per_second ? r : max);
            badges[highestTps.provider] = badges[highestTps.provider] || [];
            badges[highestTps.provider].push("highest-tps");
            const paid = online.filter(r => r.cost_per_request > 0);
            if (paid.length > 0) {
                const bestValue = paid.reduce((best, r) => {
                    const value = r.tokens_per_second / r.cost_per_request, bestVal = best.tokens_per_second / best.cost_per_request;
                    return value > bestVal ? r : best;
                });
                badges[bestValue.provider] = badges[bestValue.provider] || [];
                badges[bestValue.provider].push("best-value");
            }
            return badges;
        }

        function createModelCard(result, rank, badges) {
            const card = document.createElement("div");
            card.className = "model-card";
            const isOnline = result.status === "Online";
            const speedClass = getSpeedClass(result.time, isOnline);
            const tpsClass = getTpsClass(result.tokens_per_second);
            const costClass = getCostClass(result.cost_per_request);
            const charClass = getCharCountClass(result.character_count);
            
            const timeDisplay = isOnline ? `${result.time.toFixed(2)}s` : "N/A";
            const tpsDisplay = isOnline ? result.tokens_per_second.toFixed(0) : "N/A";
            const rankClass = (isOnline && rank <= 3) ? ` rank-${rank}` : "";
            
            const providerBadges = badges[result.provider] || [];
            let badgesHTML = "";
            if (providerBadges.length > 0) {
                badgesHTML = '<div class="badge-container">';
                providerBadges.forEach(badge => {
                    const text = badge === "fastest" ? "‚ö° Fastest" : badge === "highest-tps" ? "üöÄ Highest TPS" : badge === "best-value" ? "üí∞ Best Value" : "";
                    badgesHTML += `<span class="badge badge-${badge}">${text}</span>`;
                });
                badgesHTML += "</div>";
            }
            
            const link = AFFILIATE_LINKS[result.provider];
            const affiliateButtonHTML = isOnline ? `<a href="${link}" target="_blank" rel="noopener" class="affiliate-btn">Try ${result.provider}</a>` : '<div class="affiliate-btn" style="background-color: #c62828; cursor: not-allowed;">Currently Offline</div>';
            
            const charCountHTML = result.character_count ? 
                `<span class="char-count-badge ${charClass}">${result.character_count} chars</span>` : '';
            
            // Response preview at bottom
            const responseHTML = isOnline && result.response_preview ? 
                `<div class="response-preview-bottom" onclick="toggleResponse(this)">
                    ${escapeHtml(result.response_preview)}
                    <button class="copy-btn" onclick="event.stopPropagation(); copyResponse('${escapeHtml(result.full_response).replace(/'/g, "\\'")}', this)">üìã Copy</button>
                </div>` : '';
            
            card.innerHTML = `
                <div class="card-header">
                    <span class="rank-badge${rankClass}">#${rank}</span>
                    <div class="provider-model-wrapper">
                        <div class="card-provider">${escapeHtml(result.provider)}</div>
                        <div class="card-model">${escapeHtml(result.model)} ${charCountHTML}</div>
                    </div>
                </div>
                
                ${badgesHTML}
                
                <div class="stats-wrapper">
                    <div class="stat-group">
                        <div class="stat-label">Speed</div>
                        <div class="stat-value ${speedClass}">${timeDisplay}</div>
                    </div>
                    <div class="stat-group">
                        <div class="stat-label">TPS</div>
                        <div class="stat-value ${tpsClass}">${tpsDisplay}</div>
                    </div>
                    <div class="stat-group">
                        <div class="stat-label">Status</div>
                        <div class="stat-value ${isOnline ? "status-online" : "status-error"}">
                            ${escapeHtml(result.status)}
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <div class="stat-label">Cost Per Request</div>
                    <div class="cost-badge ${costClass}">${formatCost(result.cost_per_request)}</div>
                </div>
                
                ${affiliateButtonHTML}
                ${responseHTML}
            `;
            
            return card;
        }

        function sortResults(sortBy) {
            currentSort = sortBy;
            document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            displayResults({...allResults, results: getSortedResults()}, dataSource);
        }

        let showFreeOnly = false;
        
        function toggleFreeFilter() {
            showFreeOnly = !showFreeOnly;
            const filterBtn = document.getElementById('filter-free');
            
            if (showFreeOnly) {
                filterBtn.classList.add('active');
                filterBtn.innerHTML = '‚ú® FREE ONLY ‚úì';
            } else {
                filterBtn.classList.remove('active');
                filterBtn.innerHTML = '‚ú® FREE ONLY';
            }
            
            displayResults({...allResults, results: getSortedResults()}, dataSource);
        }

        function copyResponse(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copied!';
                button.style.background = '#4caf50';
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                button.innerHTML = '‚ùå Failed';
                setTimeout(() => {
                    button.innerHTML = 'üìã Copy';
                }, 2000);
            });
        }

        function getSortedResults() {
            let sorted = [...allResults.results];
            
            // Apply free filter if active
            if (showFreeOnly) {
                sorted = sorted.filter(result => result.cost_per_request === null || result.cost_per_request === 0);
            }
            
            if (currentSort === 'speed') {
                sorted.sort((a, b) => {
                    if (a.status !== 'Online') return 1;
                    if (b.status !== 'Online') return -1;
                    return a.time - b.time;
                });
            } else if (currentSort === 'tps') {
                sorted.sort((a, b) => {
                    if (a.status !== 'Online') return 1;
                    if (b.status !== 'Online') return -1;
                    return b.tokens_per_second - a.tokens_per_second;
                });
            } else if (currentSort === 'cost') {
                sorted.sort((a, b) => {
                    if (a.status !== 'Online') return 1;
                    if (b.status !== 'Online') return -1;
                    const costA = a.cost_per_request === null ? 0 : a.cost_per_request;
                    const costB = b.cost_per_request === null ? 0 : b.cost_per_request;
                    return costA - costB;
                });
            }
            
            return sorted;
        }

        function displayResults(data, source = "live") {
            const container = document.getElementById("results-container");
            const lastUpdated = document.getElementById("last-updated");
            
            dataSource = source;
            setDataSourceIndicator(source, data);
            
            if (data.last_updated) lastUpdated.textContent = `Last Updated: ${data.last_updated}`;
            if (!data.results || data.results.length === 0) { 
                container.innerHTML = '<div style="text-align: center; padding: 40px;">No results available</div>'; 
                return; 
            }
            
            allResults = data;
            const results = getSortedResults();
            const badges = calculateBadges(results);
            
            container.innerHTML = "";
            results.forEach((result, index) => {
                const rank = index + 1;
                const card = createModelCard(result, rank, badges);
                container.appendChild(card);
            });
            
            if (data.history && data.history.length >= 2) createTrendChart(data.history, currentChartRange);
        }

        async function fetchData() {
            console.log("Attempting to fetch fresh data...");
            const paths = ["./data.json", "data.json", "/data.json"];
            for (const path of paths) {
                try {
                    const response = await fetch(path + "?t=" + Date.now());
                    if (response.ok) {
                        const data = await response.json();
                        console.log("‚úÖ Successfully loaded fresh data from:", path);
                        displayResults(data, "live");
                        if (typeof gtag !== 'undefined') gtag("event", "data_loaded", {event_category: "data", event_label: "live_data"});
                        return true;
                    }
                } catch (error) { console.log(`Failed to load from ${path}:`, error.message); }
            }
            console.log("‚ö†Ô∏è Could not load data.json, using fallback data");
            displayResults(FALLBACK_DATA, "fallback");
            if (typeof gtag !== 'undefined') gtag("event", "data_loaded", {event_category: "data", event_label: "fallback_data"});
            return false;
        }

        console.log("üöÄ Braiain Speed Index initializing...");
        fetchData();
        setInterval(async () => { if (dataSource === "live") { console.log("üîÑ Auto-refreshing data..."); await fetchData(); } }, 21600000);
    </script>
    
    <script type="application/ld+json">
    {"@context": "https://schema.org", "@type": "WebApplication", "name": "Braiain AI Speed Index", "description": "Daily automated benchmarks of AI model API speed, tokens-per-second, and c
