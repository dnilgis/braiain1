<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braiain AI Speed Index | Daily LLM Benchmarks</title>
    <style>
        /* BASE STYLES */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f7;
            color: #1c1c1c;
        }
        header {
            background-color: #1c1c1c;
            color: white;
            text-align: center;
            padding: 30px 0 20px 0;
            margin-bottom: 20px;
        }
        h1 {
            font-size: 2.4em;
            margin-bottom: 8px;
        }
        .tagline {
            font-size: 1.1em;
            color: #c0c0c0;
        }
        .about-section {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 15px;
        }
        h2 {
            color: #333333;
            font-size: 1.5em;
            margin-top: 30px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 5px;
        }
        
        /* CARD CONTAINER: Horizontal Layout - CLIPPING FIX APPLIED HERE */
        .leaderboard-cards-wrapper {
            max-width: 1200px;
            margin: 40px auto;
            display: flex;
            flex-wrap: wrap;
            gap: 20px; 
            justify-content: center;
            /* CRITICAL FIX 1: Stops cards from stretching to the height of the tallest card */
            align-items: flex-start; 
        }

        /* INDIVIDUAL MODEL CARD */
        .model-card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s;
            height: auto; 
            
            /* CRITICAL FIX 2: Overrides internal Flexbox height calculation for column layouts */
            min-height: 0;
            overflow: visible;
        }
        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }

        /* CARD HEADER */
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        .rank-badge {
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        /* Provider/Model Wrapper */
        .provider-model-wrapper {
            display: flex;
            flex-direction: column;
            line-height: 1.1;
            overflow: hidden; 
        }
        .card-provider {
            font-size: 1.3em;
            font-weight: 700;
        }
        .card-model {
            font-size: 0.9em;
            color: #555;
            font-weight: normal;
            word-break: break-all;
        }

        /* STATS AND BUTTON */
        .stats-wrapper {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 15px;
        }
        .stat-group {
            text-align: center;
        }
        
        /* PREV TIME FIX: Ensure stat-value is a flex container for its content and the nested last-speed */
        .stat-value {
            font-size: 1.4em;
            font-weight: bold;
            /* CRITICAL FIX 4: Explicitly display as a column flex container */
            display: flex; 
            flex-direction: column; 
            align-items: center;
            line-height: 1.1;
        }
        .stat-label {
            font-size: 0.8em;
            color: #777;
            text-transform: uppercase;
            margin-bottom: 3px;
        }

        .speed-fast {
            color: #2e7d32;
        }
        .status-online {
            color: #2e7d32;
        }
        .status-error {
            color: #c62828;
        }
        
        /* LAST RECORDED SPEED STYLING */
        .last-speed {
            /* Now the value is inside a flex column, this style will apply correctly */
            font-size: 0.8em;
            color: #999;
            margin-top: 5px;
            font-weight: normal;
        }
        
        .affiliate-btn {
            background-color: #2196f3;
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9em;
            transition: background-color 0.2s;
            text-align: center;
            margin-top: 10px;
        }
        .affiliate-btn:hover {
            background-color: #1976d2;
        }

        /* RESPONSE CONTENT WRAPPER */
        .response-content-wrapper {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed #e0e0e0;
            /* CRITICAL FIX 5: Prevents this section from shrinking its contents */
            flex-shrink: 0; 
            height: auto;
        }
        
        /* RESPONSE TEXT */
        .full-response-text {
            /* Aggressive overrides for full display */
            height: unset !important; 
            max-height: fit-content; 
            
            white-space: pre-wrap;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; 
            font-size: 0.85em;
            line-height: 1.5;
            color: #333;
            background-color: #fafafa;
            padding: 10px;
            border-radius: 4px;
            overflow: auto; 
            display: block; 
        }
        
        /* LAST UPDATED STYLING */
        #last-updated-wrapper {
            text-align: center;
            margin: 20px auto 40px auto;
            font-size: 1.1em; 
            font-weight: bold; 
            color: #555;
            max-width: 1200px;
        }

        /* FOOTER STYLING */
        #site-footer {
            background-color: #1c1c1c;
            color: #c0c0c0;
            padding: 20px 15px;
            text-align: center;
            font-size: 0.85em;
            margin-top: 40px;
        }
        #site-footer a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        #site-footer a:hover {
            text-decoration: underline;
        }
        .legal-text {
            margin-top: 10px;
            font-size: 0.75em;
            color: #777;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 1000px) {
            .leaderboard-cards-wrapper {
                gap: 15px; 
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>ðŸ¤– Braiain AI Speed Index</h1>
        <p class="tagline">The definitive ranking for **Real-World LLM API Latency**</p>
    </header>

    <section class="about-section">
        <p>
            Welcome to the **Braiain Speed Index**, the internet's only fully automated, daily-updated leaderboard focused exclusively on **Real-World API Latency** (End-to-End Speed). **We tell you which model is fastest, not just which model is smartest.**
        </p>
    </section>

    <div class="leaderboard-cards-wrapper" id="results-container">
        <p style="text-align: center; padding: 20px; width: 100%;">Loading live data...</p>
    </div>
    
    <div id="last-updated-wrapper">
        <span id="last-updated"></span>
    </div>

    <section class="about-section">
        <h2>ðŸ”¬ Methodology and Transparency</h2>
        <p>
            The benchmark measures **end-to-end inference speed** (latency), which is the total time from sending the API request to receiving the final byte of the response. This directly impacts real-world application speed and user experience.
        </p>
        <p>
            The test uses the same **complex, high-token prompt** for every model: "Write a complete, three-paragraph summary of the history of the internet, ending with a prediction for 2030." All models are configured to generate a minimum of **300 output tokens**. The lowest recorded time determines the winner. Data is updated daily via a GitHub Actions workflow.
        </p>
    </section>

    <footer id="site-footer">
        <div>
            A <a href="mailto:dnilgis@gmail.com">dnilgis</a> X Gemini project.
        </div>
        <div class="legal-text">
            *Legal Disclaimer Mumbo Jumbo:* This site provides benchmark data for informational purposes only. Speed metrics are based on testing conditions and may vary. All product names, logos, and brands are property of their respective owners.
        </div>
    </footer>

    <script>
        const AFFILIATE_LINKS = {
            'OpenAI': 'https://link.openai.com/signup?ref=your-openai-affiliate-id', 
            'Google': 'https://cloud.google.com/gemini/signup?ref=your-google-affiliate-id', 
            'Anthropic': 'https://www.anthropic.com/signup?ref=your-anthropic-affiliate-id'
        };

        function getAffiliateLink(provider) {
            return AFFILIATE_LINKS[provider] || '#';
        }

        function formatResults(results) {
            let html = '';

            results.forEach((item, index) => {
                const modelSlug = (item.provider + '-' + item.model).toLowerCase().replace(/[^a-z0-9-]+/g, '-');
                const rank = index + 1;
                
                let statusClass = item.status === 'Online' ? 'status-online' : 'status-error';
                let speedClass = item.time < 1.0 ? 'speed-fast' : (item.time < 5.0 ? 'speed-medium' : '');

                const isWinner = (index === 0 && item.status === 'Online'); 
                
                // CORRECTED LOGIC: Generates the full string for Previous Time
                const previousTime = item.previous_time ? `Prev: ${item.previous_time}s` : 'Prev: N/A';

                let affiliateButtonHTML = '';
                if (item.status === 'Online') {
                    const link = getAffiliateLink(item.provider);
                    const buttonText = isWinner ? 'ðŸ¥‡ RUN THIS MODEL NOW' : 'RUN THIS MODEL';
                    if (link && link !== '#') {
                         affiliateButtonHTML = `<a href="${link}" target="_blank" class="affiliate-btn">${buttonText}</a>`;
                    }
                } else {
                    affiliateButtonHTML = `<a class="affiliate-btn" style="background-color: #c62828;">API FAILURE</a>`;
                }

                html += `
                    <div class="model-card" id="${modelSlug}">
                        <div class="card-header">
                            <span class="rank-badge">#${rank}</span>
                            <div class="provider-model-wrapper">
                                <div class="card-provider">${item.provider}</div>
                                <div class="card-model">${item.model}</div>
                            </div>
                        </div>
                        
                        <div class="stats-wrapper">
                            <div class="stat-group">
                                <div class="stat-label">Current Speed</div>
                                <div class="stat-value ${speedClass}">
                                    ${item.time}s
                                    <div class="last-speed">${previousTime}</div>
                                </div>
                            </div>
                            <div class="stat-group">
                                <div class="stat-label">Status</div>
                                <div class="stat-value ${statusClass}">${item.status}</div>
                            </div>
                        </div>
                        
                        ${affiliateButtonHTML}

                        <div class="response-content-wrapper">
                            <div class="full-response-text">${item.full_response || item.response_preview}</div>
                        </div>
                    </div>
                `;
            });

            return html;
        }

        async function fetchData() {
            const paths = ['data.json', '/data.json']; 
            const cacheBuster = `?t=${new Date().getTime()}`;
            
            for (const path of paths) {
                try {
                    const response = await fetch(path + cacheBuster); 
                    
                    if (!response.ok) {
                        throw new Error(`Path ${path} failed with status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    const resultsContainer = document.getElementById('results-container');
                    const lastUpdatedElement = document.getElementById('last-updated');

                    if (resultsContainer && data.results) {
                        resultsContainer.innerHTML = formatResults(data.results);
                    }
                    if (lastUpdatedElement && data.last_updated) {
                        lastUpdatedElement.textContent = `Last Updated: ${data.last_updated}`;
                    }
                    return; 

                } catch (error) {
                    console.error('Data load attempt failed:', error);
                }
            }

            // If we reach here, both paths failed
            document.getElementById('results-container').innerHTML = `<p class="error-message" style="text-align: center; color: #c62828; padding: 20px; font-weight: bold; background: #fff; width: 100%;">
                ðŸ”´ ERROR: Live data failed to load. Please ensure the data.json file exists and is accessible.
            </p>`;
        }

        fetchData(); 
    </script>
</body>
</html>
