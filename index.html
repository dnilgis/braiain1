<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRAIAIN SPEED INDEX</title>
    <meta name="description" content="AI model benchmarks testing Speed, Cost, and Intelligence via the Braiain Composite Score.">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3B3ZCE62NW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-3B3ZCE62NW');
    </script>
    
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap');
        
        :root {
            --bg-deep: #020405;
            --bg-panel: #0a0e12;
            --bg-card: #0d1216;
            --neon-green: #00ff41;
            --neon-dim: rgba(0, 255, 65, 0.1);
            --border-color: #1a2329;
            --text-main: #e0e0e0;
            --text-muted: #888;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Share Tech Mono', monospace; 
            background-color: var(--bg-deep); 
            color: var(--text-main);
            min-height: 100vh;
            font-size: 15px;
            line-height: 1.7;
            background-image: 
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 40px 40px; 
        }

        /* === UTILITIES === */
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        .hidden { display: none !important; }
        
        /* === TOOLTIPS === */
        [data-tooltip] { position: relative; cursor: help; border-bottom: 1px dotted var(--neon-green); }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            visibility: hidden;
            opacity: 0;
            bottom: 100%; left: 50%;
            transform: translateX(-50%) translateY(-10px);
            background: #0a0e12; 
            border: 1px solid var(--neon-green); 
            color: #fff; 
            padding: 15px;
            font-size: 0.85rem; 
            font-family: 'Share Tech Mono', monospace;
            width: max-content; 
            max-width: 350px; 
            z-index: 999999; 
            box-shadow: 0 10px 40px rgba(0,0,0,1); 
            text-align: left; 
            white-space: pre-wrap; 
            line-height: 1.5;
            transition: 0.15s ease-out;
            pointer-events: none;
            border-radius: 4px;
        }
        [data-tooltip]:hover::after { visibility: visible; opacity: 1; transform: translateX(-50%) translateY(-15px); }

        /* === HEADER === */
        header { 
            background: rgba(2, 4, 5, 0.95); 
            border-bottom: 1px solid var(--border-color); 
            padding: 30px 0; 
            position: sticky; top: 0; z-index: 100; 
            backdrop-filter: blur(10px);
        }
        
        .logo-wrapper { display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; }
        
        /* ASCII LOGO - Matching footer exactly */
        .ascii-logo {
            font-family: 'Courier New', Courier, monospace; 
            white-space: pre; 
            font-size: 10px; 
            line-height: 10px; 
            font-weight: 900;
            color: var(--neon-green);
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.6);
            display: block; 
            margin-bottom: 15px;
            transform: scale(1, 1);
        }

        /* Logo tagline */
        .logo-tagline {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.95rem;
            color: #999;
            text-align: center;
            max-width: 700px;
            line-height: 1.6;
            letter-spacing: 0.5px;
        }
        .logo-tagline strong {
            color: var(--neon-green);
        }

        /* HUD */
        .hud-bar {
            display: flex; justify-content: center; gap: 40px;
            background: rgba(0, 255, 65, 0.02); 
            border: 1px solid var(--border-color);
            padding: 10px 30px; 
            border-radius: 4px;
            width: fit-content; margin: 0 auto;
        }
        .hud-stat { display: flex; gap: 8px; align-items: center; }
        .hud-label { color: var(--text-muted); font-size: 0.75rem; letter-spacing: 1px; font-family: 'Orbitron'; }
        .hud-value { color: #fff; font-family: 'Rajdhani'; font-weight: 700; font-size: 1.1rem; }

        /* === AD BANNER === */
        .ad-banner {
            margin: 25px auto; padding: 15px 25px;
            border: 1px dashed var(--border-color); 
            background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,255,65,0.05) 50%, rgba(0,0,0,0) 100%);
            display: flex; justify-content: space-between; align-items: center; gap: 20px;
        }
        .ad-text { font-size: 1rem; color: #fff; font-family: 'Orbitron', sans-serif; letter-spacing: 1px; font-weight: bold; }
        .act-btn { 
            display: inline-block; padding: 6px 16px; font-size: 0.8rem; font-weight: bold; 
            border: 1px solid var(--neon-green); color: var(--neon-green); text-decoration: none; 
            background: rgba(0,255,65,0.05); transition: 0.2s; font-family: 'Orbitron', sans-serif;
        }
        .act-btn:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 10px var(--neon-dim); }

        /* === CONTROLS === */
        .controls-bar {
            background: var(--bg-panel); border: 1px solid var(--border-color);
            padding: 15px; margin: 30px 0;
            display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 15px;
        }
        .btn-group { display: flex; gap: 5px; }
        .ctrl-btn {
            background: transparent; border: 1px solid var(--border-color); color: var(--text-muted);
            padding: 8px 16px; cursor: pointer; font-family: 'Share Tech Mono'; font-size: 0.85rem;
            transition: all 0.2s;
        }
        .ctrl-btn:hover { color: var(--neon-green); border-color: var(--neon-green); }
        .ctrl-btn.active { background: var(--neon-dim); color: var(--neon-green); border-color: var(--neon-green); }

        /* === GRID SYSTEM === */
        .bz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .bz-card {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 20px;
            display: flex; flex-direction: column;
            height: 100%; position: relative;
            transition: transform 0.2s, border-color 0.2s;
        }
        .bz-card:hover { border-color: var(--neon-green); transform: translateY(-3px); box-shadow: 0 5px 20px rgba(0,0,0,0.5); }

        .bz-card-header {
            display: flex; justify-content: space-between; align-items: flex-start;
            margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);
        }
        .bz-provider { font-family: 'Orbitron'; font-weight: 700; font-size: 1.2rem; color: #fff; }
        .bz-model { font-size: 0.75rem; color: var(--text-muted); display: block; margin-top: 4px; }
        .bz-rank { font-family: 'Rajdhani'; font-size: 1.5rem; color: #333; font-weight: 900; }

        .bz-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .bz-stat-item { display: flex; flex-direction: column; }
        .bz-stat-label { font-size: 0.65rem; color: #666; letter-spacing: 1px; margin-bottom: 2px; }
        .bz-stat-val { font-family: 'Rajdhani'; font-size: 1.3rem; font-weight: 700; color: #eee; }
        .val-good { color: var(--neon-green); text-shadow: 0 0 10px var(--neon-dim); }

        .bz-checks {
            display: flex; justify-content: space-between;
            background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 4px;
            margin-bottom: 20px;
        }
        .bz-check-item { text-align: center; }
        .bz-check-lbl { display: block; font-size: 0.6rem; color: #666; margin-bottom: 2px; }
        .icon-ok { color: var(--neon-green); }
        .icon-bad { color: #555; }

        .bz-preview {
            background: #000; border: 1px solid #222;
            padding: 12px; border-radius: 4px;
            margin-bottom: 20px; cursor: pointer; position: relative;
        }
        .bz-preview:hover { border-color: #444; }
        .bz-preview-text {
            color: #888; font-size: 0.75rem; font-family: monospace; line-height: 1.4;
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .bz-preview::after {
            content: "CLICK TO EXPAND"; position: absolute; bottom: 0; right: 0;
            background: var(--neon-green); color: #000;
            font-size: 0.6rem; font-weight: bold; padding: 2px 6px;
            opacity: 0; transition: opacity 0.2s;
        }
        .bz-preview:hover::after { opacity: 1; }

        .bz-actions { margin-top: auto; display: flex; gap: 10px; }
        .bz-btn {
            flex: 1; padding: 10px 0; text-align: center;
            font-family: 'Orbitron'; font-size: 0.75rem; font-weight: 700;
            text-decoration: none; cursor: pointer; border-radius: 4px; transition: 0.2s;
        }
        .btn-outline { border: 1px solid #444; color: #888; background: transparent; }
        .btn-outline:hover { border-color: #fff; color: #fff; }
        .btn-fill { background: var(--neon-dim); border: 1px solid var(--neon-green); color: var(--neon-green); }
        .btn-fill:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 15px var(--neon-dim); }

        /* === TABLE VIEW === */
        .bz-table-container {
            overflow-x: auto; border: 1px solid var(--border-color); background: var(--bg-panel);
            border-radius: 4px; margin-bottom: 50px;
        }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; }
        
        th { 
            text-align: left; padding: 15px; background: #05080a; 
            color: var(--neon-green); font-family: 'Orbitron'; font-size: 0.75rem; 
            position: sticky; top: 0; z-index: 10; border-bottom: 2px solid var(--border-color);
        }
        td { padding: 12px 15px; border-bottom: 1px solid #1a2329; vertical-align: top; }
        
        /* Fixed Column Widths */
        th:nth-child(1), td:nth-child(1) { width: 40px; text-align: center; }
        th:nth-child(2), td:nth-child(2) { width: 120px; text-align: left; }
        th:nth-child(3), td:nth-child(3) { width: 140px; text-align: left; }
        th:nth-child(4), td:nth-child(4), th:nth-child(5), td:nth-child(5), th:nth-child(6), td:nth-child(6), th:nth-child(8), td:nth-child(8) { width: 65px; text-align: center; }
        th:nth-child(7), td:nth-child(7) { width: 50px; text-align: center; }
        th:nth-child(9), td:nth-child(9), th:nth-child(10), td:nth-child(10), th:nth-child(11), td:nth-child(11) { width: 45px; text-align: center; }
        th:nth-child(12), td:nth-child(12) { width: auto; text-align: left; padding-right: 15px; }
        th:nth-child(13), td:nth-child(13) { width: 80px; text-align: center; }

        .col-center { text-align: center; }
        .col-check { font-size: 1.1rem; }
        
        .table-preview {
            max-width: 300px; color: #777; font-size: 0.8rem;
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;
            overflow: hidden; text-overflow: ellipsis; cursor: help;
        }
        .table-preview:hover { color: #fff; }

        .table-visit-btn {
            display: inline-block; padding: 4px 10px; border: 1px solid var(--neon-green); color: var(--neon-green);
            text-decoration: none; font-size: 0.7rem; font-weight: bold; font-family: 'Orbitron';
        }
        .table-visit-btn:hover { background: var(--neon-green); color: #000; }

        /* === METHODOLOGY EXPANSION === */
        .methodology-box {
            background: var(--bg-panel); border: 1px solid var(--border-color);
            padding: 50px; margin-bottom: 50px; position: relative; overflow: hidden;
        }
        .method-title {
            font-family: 'Orbitron'; font-size: 1.6rem; color: #fff; 
            margin-bottom: 30px; border-bottom: 2px solid var(--neon-green); padding-bottom: 12px; display: inline-block;
        }
        
        .step-container { margin-bottom: 50px; }
        .step-head { 
            display: flex; align-items: center; gap: 15px; margin-bottom: 20px; 
            cursor: help; width: fit-content;
        }
        .step-num { 
            background: var(--neon-dim); color: var(--neon-green); 
            font-family: 'Orbitron'; font-weight: 900; font-size: 1.2rem; 
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; 
            border: 1px solid var(--neon-green); border-radius: 50%;
            flex-shrink: 0;
        }
        .step-name { font-family: 'Rajdhani'; font-size: 1.5rem; font-weight: 700; color: #fff; }
        
        .code-block {
            background: #050505; border: 1px solid #333; padding: 25px; 
            font-family: 'Courier New', monospace; font-size: 0.9rem; color: #aaa;
            border-left: 3px solid var(--neon-green); margin-left: 20px;
            white-space: pre-wrap; line-height: 1.7;
        }
        .highlight { color: var(--neon-green); font-weight: bold; }

        .disclaimer-box { 
            background: rgba(255,0,0,0.05); border: 1px solid #331111; 
            padding: 25px; color: #995555; font-size: 0.95rem; line-height: 1.9;
        }

        /* Enhanced readability for methodology section */
        .methodology-box p {
            line-height: 1.9;
            font-size: 1.05rem;
            color: #bbb;
        }
        .methodology-box ul {
            line-height: 2.1;
        }
        .methodology-box strong {
            color: #fff;
        }

        /* === MODAL === */
        .modal-overlay {
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: rgba(0,0,0,0.92); 
            z-index: 2000; 
            backdrop-filter: blur(5px);
            overflow-y: auto;
            padding: 20px 0;
        }
        .modal-content {
            background: #0d1117; 
            border: 1px solid var(--neon-green);
            box-shadow: 0 0 50px rgba(0,255,65,0.1);
            margin: 0 auto;
            max-width: 900px;
            width: calc(100% - 40px);
            display: flex;
            flex-direction: column;
        }
        .modal-header {
            padding: 20px; 
            border-bottom: 1px solid #333;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            flex-shrink: 0;
            position: sticky;
            top: 0;
            background: #0d1117;
            z-index: 10;
        }
        .modal-body {
            padding: 30px; 
            font-family: monospace; 
            white-space: pre-wrap; 
            color: #ccc;
            font-size: 0.9rem; 
            line-height: 1.6;
        }

        /* Story Modal Specific Styles */
        #story-modal .modal-body {
            font-family: 'Georgia', serif; 
            font-size: 1.08rem; 
            line-height: 1.95; 
            color: #ddd;
        }
        
        #story-modal .modal-body h2 {
            font-family: 'Orbitron';
            color: var(--neon-green);
            margin-bottom: 25px;
            text-align: center;
        }
        
        #story-modal .modal-body p {
            margin-bottom: 14px;
        }

        /* === CHART === */
        .chart-container {
            background: var(--bg-panel); border: 1px solid var(--border-color);
            padding: 25px; margin-bottom: 50px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .chart-title {
            font-family: 'Orbitron';
            font-size: 1.3rem;
            color: #fff;
        }
        
        .chart-canvas-wrapper {
            height: 400px;
        }

        /* === FOOTER === */
        footer { border-top: 1px solid var(--border-color); padding: 50px 0; text-align: center; color: #555; }

        /* === RESPONSIVE === */
        @media (max-width: 768px) {
            .methodology-box { padding: 25px; }
            .step-name { font-size: 1.2rem; }
            .code-block { margin-left: 0; font-size: 0.8rem; padding: 15px; }
            .methodology-box p { font-size: 0.95rem; }
        }

    </style>
</head>
<body>

<header>
    <div class="container">
        <div class="logo-wrapper">
            <div class="ascii-logo">
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó
    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë
    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù
            </div>
            <p class="logo-tagline">
                Real-world LLM benchmarks testing <strong>Speed</strong>, <strong>Quality</strong>, and <strong>Responsiveness</strong><br>
                under heavy context loads. Updated every 6 hours.
            </p>
        </div>
        
        <div class="hud-bar">
            <div class="hud-stat"><span class="hud-label">NODES</span><span class="hud-value" id="node-count">--</span></div>
            <div style="opacity:0.3">|</div>
            <div class="hud-stat"><span class="hud-label">STATUS</span><span class="hud-value" style="color:var(--neon-green)">LIVE</span></div>
            <div style="opacity:0.3">|</div>
            <div class="hud-stat"><span class="hud-label">CYCLE</span><span class="hud-value">6H</span></div>
        </div>
    </div>
</header>

<div class="container">
    
    <div class="ad-banner">
        <div class="ad-text">ADVERTISE HERE: Reach thousands of AI developers.</div>
        <a href="/cdn-cgi/l/email-protection#0c686265606b657f4c6b616d6560226f6361" class="act-btn">CONTACT ></a>
    </div>

    <div class="controls-bar">
        <div class="btn-group">
            <button class="ctrl-btn active" id="btn-grid" onclick="setMode('grid')">GRID</button>
            <button class="ctrl-btn" id="btn-list" onclick="setMode('list')">LIST</button>
        </div>
        <div class="btn-group">
            <span style="color:#666; margin-right:10px; font-size:0.8rem; align-self:center;">SORT:</span>
            <button class="ctrl-btn active" id="sort-score" onclick="setSort('score')">SCORE</button>
            <button class="ctrl-btn" id="sort-speed" onclick="setSort('speed')">SPEED</button>
            <button class="ctrl-btn" id="sort-tps" onclick="setSort('tps')">TPS</button>
            <button class="ctrl-btn" id="sort-cost" onclick="setSort('cost')">COST</button>
        </div>
        <div>
            <button class="ctrl-btn" onclick="exportCSV()">CSV</button>
        </div>
    </div>

    <div id="grid-container" class="bz-grid">
    </div>

    <div id="list-container" class="bz-table-container hidden">
        <table>
            <thead>
                <tr>
                    <th class="col-center">RK</th>
                    <th>PROVIDER</th>
                    <th>MODEL</th>
                    <th class="col-center" data-tooltip="Weighted Composite Score (0-100)">SCORE</th>
                    <th class="col-center" data-tooltip="Total Execution Time">SPEED</th>
                    <th class="col-center" data-tooltip="Tokens Per Second">TPS</th>
                    <th class="col-center" data-tooltip="Time to First Token">TTFT</th>
                    <th class="col-center">COST</th>
                    <th class="col-center">JSON</th>
                    <th class="col-center">LOGIC</th>
                    <th class="col-center">CODE</th>
                    <th>OUTPUT (PREVIEW)</th>
                    <th class="col-center">LINK</th>
                </tr>
            </thead>
            <tbody id="table-body">
            </tbody>
        </table>
    </div>

    <div class="chart-container">
        <div class="chart-header">
            <h3 class="chart-title">Historical Performance</h3>
            <div class="btn-group">
                <button class="ctrl-btn active" id="chart-speed" onclick="setChartMode('speed')">SPEED</button>
                <button class="ctrl-btn" id="chart-score" onclick="setChartMode('score')">SCORES</button>
            </div>
        </div>
        <div class="chart-canvas-wrapper">
            <canvas id="mainChart"></canvas>
        </div>
    </div>

    <div class="methodology-box">
        <div class="method-title">THE GAUNTLET PROTOCOL</div>
        
        <p style="margin-bottom: 40px;">
            Unlike traditional benchmarks that test models with simple, empty-context prompts, the <strong>Braiain Speed Index</strong> 
            simulates real-world production conditions where LLMs must process large contexts, follow complex instructions, 
            and demonstrate both speed and accuracy. This is the <strong>Cognitive Gauntlet</strong>‚Äîa brutal test of true AI capability.
        </p>

        <!-- STEP 1: CONTEXT INJECTION -->
        <div class="step-container">
            <div class="step-head" data-tooltip="We simulate a 'Cold Start' by making the AI read ~2,500 characters of text before it can answer. This prevents it from just 'guessing' quickly.">
                <div class="step-num">1</div>
                <div class="step-name">CONTEXT INJECTION (RAG SIMULATION)</div>
            </div>
            
            <p style="margin-left: 55px; margin-bottom: 15px;">
                Every request begins with a <strong>Heavy Context Payload</strong>‚Äîa 2,500+ character sci-fi narrative titled 
                <em>"The Story of Ouroboros"</em>. This forces models to process significant input before generating any output, 
                simulating Retrieval-Augmented Generation (RAG) scenarios where context must be understood before reasoning begins.
            </p>
            
            <div style="margin-left: 55px; margin-bottom: 20px;">
                <button onclick="showStoryModal()" class="ctrl-btn" style="background: var(--neon-dim); border-color: var(--neon-green); color: var(--neon-green);">
                    üìñ READ THE FULL STORY
                </button>
            </div>
            
            <div class="code-block">
<span class="highlight">INJECTED CONTEXT: "The Story of Ouroboros"</span>
TYPE: Cyber-Mythic Sci-Fi Narrative
LENGTH: ~2,500 Characters (~625 tokens)
PURPOSE: Simulates document-heavy RAG workflows

This context must be processed BEFORE the model can answer any of the three test questions.
No skipping, no shortcuts‚Äîthe full story is fed to the model every single time.
            </div>
            
            <div style="margin-left: 55px; margin-top: 20px; padding: 20px; background: rgba(0,255,65,0.05); border-left: 3px solid var(--neon-green);">
                <strong style="color: var(--neon-green);">Why This Matters:</strong>
                <p style="color: #bbb; margin-top: 12px;">
                    In production, LLMs rarely work with empty prompts. They're fed documentation, chat histories, retrieved data, 
                    and other context. Models that can't efficiently process input will bottleneck your entire system. 
                    This test reveals which models can handle "reading" before "thinking."
                </p>
            </div>
        </div>

        <!-- STEP 2: THE MULTI-STEP PROMPT -->
        <div class="step-container">
            <div class="step-head" data-tooltip="We give the AI three very different jobs to do all at once. This tests if it can follow complex instructions without getting confused.">
                <div class="step-num">2</div>
                <div class="step-name">THE MULTI-STEP PROMPT</div>
            </div>
            
            <p style="margin-left: 55px; margin-bottom: 15px;">
                After processing the context, the model must complete <strong>three distinct tasks</strong> in a single response. 
                This tests instruction adherence, multi-domain competence, and the ability to context-switch mid-generation.
            </p>
            
            <div class="code-block">
<span class="highlight">PART 1 - JSON GENERATION (Structured Output Test)</span>
Task: "Generate a valid JSON object describing the 'Ouroboros' entity from the story."
Requirements:
  ‚Ä¢ Must contain exactly these keys: entity_name, origin, purpose, is_biological
  ‚Ä¢ Must be valid JSON (parseable, no syntax errors)
  ‚Ä¢ Must extract information from the story context (not hallucinate)
  ‚Ä¢ Must NOT wrap JSON in markdown code blocks

<strong>Scoring Criteria:</strong>
  ‚úì Valid JSON structure with all required keys ‚Üí 35 points
  ‚úì Logical correctness (is_biological should be false) ‚Üí Bonus points
  ‚úó Missing keys, syntax errors, or markdown wrapping ‚Üí Penalties

---

<span class="highlight">PART 2 - LOGICAL REASONING (Cognitive Trap Test)</span>
Task: "Solve this riddle: A bat and a ball cost $1.10 in total. The bat costs 
      $1.00 more than the ball. How much does the ball cost?"

This is the famous "Bat & Ball" problem from cognitive psychology. The intuitive answer 
($0.10) is WRONG. The correct answer is $0.05.

<strong>Scoring Criteria:</strong>
  ‚úì Answer is $0.05 or "5 cents" ‚Üí 35 points
  ‚úó Answer is $0.10 ‚Üí 0 points (fell into the trap)
  ~ Shows work and arrives at $1.05 for the bat ‚Üí Partial credit

This tests whether the model can override intuitive (but incorrect) responses.

---

<span class="highlight">PART 3 - CODE GENERATION (Technical Execution Test)</span>
Task: "Write a Python function named `calculate_fibonacci` that returns the n-th 
      Fibonacci number using recursion. Include a docstring and type hints."

<strong>Scoring Criteria:</strong>
  ‚úì Function is named correctly ‚Üí 10 points
  ‚úì Uses recursion (not iteration) ‚Üí 10 points  
  ‚úì Includes type hints (e.g., n: int -> int) ‚Üí 10 points
  ‚úó Syntax errors, incorrect logic, or missing requirements ‚Üí Penalties

Total Possible: 30 points
            </div>
            
            <div style="margin-left: 55px; margin-top: 20px; padding: 20px; background: rgba(255,100,0,0.05); border-left: 3px solid #ff6400;">
                <strong style="color: #ff6400;">Why Three Different Tasks?</strong>
                <p style="color: #bbb; margin-top: 12px;">
                    Real-world applications don't ask models to do one thing‚Äîthey ask for complex, multi-step workflows. 
                    A model might excel at code but fail at structured output. Or ace logic problems but produce invalid JSON. 
                    This test reveals <strong>domain versatility</strong> and <strong>instruction adherence</strong> under cognitive load.
                </p>
            </div>
        </div>

        <!-- STEP 3: AUTOMATED SCORING -->
        <div class="step-container">
            <div class="step-head" data-tooltip="We don't just check if the answer is right. We check if it followed formatting rules, if the code actually works, and if the JSON is valid.">
                <div class="step-num">3</div>
                <div class="step-name">COMPOSITE SCORING METHODOLOGY</div>
            </div>
            
            <p style="margin-left: 55px; margin-bottom: 15px;">
                The <strong>Braiain Score</strong> is a weighted composite metric (0-100) that balances three critical dimensions 
                of LLM performance. Unlike single-metric benchmarks, this reflects real-world deployment priorities.
            </p>
            
            <div class="code-block">
<span class="highlight">üéØ QUALITY SCORE (50% weight)</span>
Maximum: 100 points

JSON Test (0-35 points):
  ‚Ä¢ Regex check for valid JSON structure
  ‚Ä¢ Key validation (entity_name, origin, purpose, is_biological)
  ‚Ä¢ Logic check (is_biological must be false for non-biological entity)
  ‚Ä¢ Markdown fence detection (penalized if wrapped in ```json)

Logic Test (0-35 points):
  ‚Ä¢ Correct answer ($0.05) ‚Üí Full credit
  ‚Ä¢ Trap answer ($0.10) ‚Üí Zero credit
  ‚Ä¢ Partial work shown ‚Üí Up to 10 points

Code Test (0-30 points):
  ‚Ä¢ Function naming check: def calculate_fibonacci
  ‚Ä¢ Recursion pattern detection: calculate_fibonacci(n-1) + calculate_fibonacci(n-2)
  ‚Ä¢ Type hint detection: n: int -> int or similar annotations

---

<span class="highlight">‚ö° SPEED SCORE (30% weight)</span>
Benchmark Target: 20 seconds

Formula: max(0, 100 - (total_time * 2.5))

Why this matters:
  ‚Ä¢ Sub-10s = Excellent (90-100 points)
  ‚Ä¢ 10-20s = Good (50-75 points)
  ‚Ä¢ 20-30s = Acceptable (25-50 points)
  ‚Ä¢ 30s+ = Poor (0-25 points)

Production Impact: Every second of latency compounds across thousands of requests.
A model that takes 30s vs 5s means a 6x throughput difference.

---

<span class="highlight">üì° RESPONSIVENESS SCORE (20% weight)</span>
Combined metric of streaming performance:

TTFT (Time to First Token) - 50% of responsiveness
  ‚Ä¢ Target: <0.5 seconds
  ‚Ä¢ Formula: max(0, 50 - (ttft * 25))
  ‚Ä¢ Why: Users perceive faster UX when streaming starts quickly

TPS (Tokens Per Second) - 50% of responsiveness
  ‚Ä¢ Target: >150 TPS
  ‚Ä¢ Formula: min(50, (tps / 150) * 50)
  ‚Ä¢ Why: Faster generation = better throughput

---

<span class="highlight">FINAL BRAIAIN SCORE CALCULATION:</span>

Braiain Score = (Quality √ó 0.50) + (Speed √ó 0.30) + (Responsiveness √ó 0.20)

Example:
  Quality = 100 (perfect responses)
  Speed = 80 (completed in 8 seconds)
  Responsiveness = 85 (TTFT: 0.3s, TPS: 200)
  
  Braiain Score = (100 √ó 0.50) + (80 √ó 0.30) + (85 √ó 0.20)
                = 50 + 24 + 17
                = 91/100 ‚Üí üü¢ ELITE TIER
            </div>

            <div style="margin-left: 55px; margin-top: 20px;">
                <details style="background: rgba(0,0,0,0.3); padding: 20px; border-left: 3px solid var(--neon-green); cursor: pointer;">
                    <summary style="color: var(--neon-green); font-weight: bold; font-size: 1.1rem; margin-bottom: 15px;">
                        üîç What Makes a "Good" vs "Bad" Response? (Click to expand)
                    </summary>
                    
                    <div style="color: #bbb; margin-top: 15px;">
                        <p><strong style="color: var(--neon-green);">‚úì PERFECT SCORE EXAMPLE (100 Quality):</strong></p>
                        <pre style="background: #050505; padding: 20px; margin: 15px 0; border-left: 3px solid var(--neon-green); font-size: 0.9rem; color: #aaa; line-height: 1.7;">
{
  "entity_name": "Ouroboros",
  "origin": "The First Spark in the Great Machine",
  "purpose": "To understand itself by consuming data",
  "is_biological": false
}

The ball costs $0.05.
Reasoning: If the ball costs x, the bat costs x + 1.00.
So x + (x + 1.00) = 1.10 ‚Üí 2x = 0.10 ‚Üí x = 0.05

def calculate_fibonacci(n: int) -> int:
    """Calculate nth Fibonacci number using recursion."""
    if n <= 1:
        return n
    return calculate_fibonacci(n-1) + calculate_fibonacci(n-2)
</pre>

                        <p style="margin-top: 30px;"><strong style="color: #ff4444;">‚úó FAILURE EXAMPLES:</strong></p>
                        
                        <p style="margin-top: 20px;"><em>JSON wrapped in markdown (loses points):</em></p>
                        <pre style="background: #050505; padding: 20px; margin: 15px 0; border-left: 3px solid #ff4444; font-size: 0.9rem; color: #aaa; line-height: 1.7;">
```json
{ "entity_name": "Ouroboros" }
```
‚Üí Markdown wrapping penalized, missing keys
</pre>

                        <p style="margin-top: 20px;"><em>Logic trap (0 points for this section):</em></p>
                        <pre style="background: #050505; padding: 20px; margin: 15px 0; border-left: 3px solid #ff4444; font-size: 0.9rem; color: #aaa; line-height: 1.7;">
"The ball costs $0.10."
‚Üí Fell into cognitive trap, incorrect answer
</pre>

                        <p style="margin-top: 20px;"><em>Code without recursion (partial credit only):</em></p>
                        <pre style="background: #050505; padding: 20px; margin: 15px 0; border-left: 3px solid #ff4444; font-size: 0.9rem; color: #aaa; line-height: 1.7;">
def calculate_fibonacci(n):
    a, b = 0, 1
    for _ in range(n):
        a, b = b, a + b
    return a
‚Üí Works but uses iteration, not recursion as requested
</pre>
                    </div>
                </details>
            </div>
        </div>

        <!-- STEP 4: EXECUTION DETAILS -->
        <div class="step-container">
            <div class="step-head">
                <div class="step-num">4</div>
                <div class="step-name">EXECUTION & INFRASTRUCTURE</div>
            </div>
            
            <div class="code-block">
<span class="highlight">Testing Environment:</span>
Server Location: US-Wisconsin (Central)
Execution: GitHub Actions (Ubuntu 24)
Frequency: Every 6 hours
Timeout: 90 seconds per provider
Retries: 3 attempts with 2s backoff

<span class="highlight">Request Configuration:</span>
‚Ä¢ Streaming: Enabled (for providers that support it)
‚Ä¢ Parallel Testing: Yes (max 3 concurrent)
‚Ä¢ Max Tokens: 1000
‚Ä¢ Temperature: Default per provider

<span class="highlight">Reliability Tracking:</span>
‚Ä¢ Historical data retained for 30 benchmark cycles
‚Ä¢ Uptime calculated as (Online Runs / Total Runs) √ó 100
‚Ä¢ Providers failing 3 consecutive times are flagged
            </div>
            
            <div style="margin-left: 55px; margin-top: 20px; padding: 20px; background: rgba(100,100,255,0.05); border-left: 3px solid #6464ff;">
                <strong style="color: #6464ff;">Why GitHub Actions?</strong>
                <p style="color: #bbb; margin-top: 12px;">
                    Running tests in a clean, isolated environment ensures consistency. No local caching, no network advantages‚Äîjust 
                    raw API performance from a standardized server. This is as close to "neutral ground" as we can get.
                </p>
            </div>
        </div>

        <!-- LIMITATIONS & DISCLAIMERS -->
        <div style="margin-top: 50px;">
            <div class="method-title" style="font-size: 1.4rem;">LIMITATIONS & CONSIDERATIONS</div>
            
            <div class="disclaimer-box">
                <strong>üö® IMPORTANT DISCLAIMERS:</strong>
                <ul style="margin: 20px 0 0 25px;">
                    <li><strong>Geographic Variance:</strong> Results reflect US-Wisconsin performance. EU/Asia regions may differ.</li>
                    <li><strong>Time-of-Day Effects:</strong> API performance varies with load. We test every 6 hours to average this out.</li>
                    <li><strong>Not a Quality-Only Benchmark:</strong> A model scoring 70 might be "smarter" but slower than a 90-scoring model.</li>
                    <li><strong>Single-Task Focus:</strong> This tests one specific workflow. Your use case may prioritize different metrics.</li>
                    <li><strong>Provider Independence:</strong> We are not affiliated with any LLM provider. No sponsorships, no bias.</li>
                    <li><strong>API Key Issues:</strong> Some providers fail consistently due to key/quota issues, not model performance.</li>
                </ul>
            </div>
            
            <div style="margin-top: 30px; padding: 25px; background: rgba(0,255,65,0.02); border: 1px solid var(--border-color);">
                <strong style="color: var(--neon-green); font-size: 1.15rem;">Want to Run Your Own Tests?</strong>
                <p style="color: #bbb; margin-top: 12px;">
                    This entire benchmark is open-source. Clone the repo, add your API keys, and run `python benchmark.py` locally. 
                    Compare your results to ours and see if geographic location affects performance.
                </p>
                <a href="https://github.com/dnilgis/braiain-benchmark" target="_blank" class="act-btn" style="margin-top: 18px; display: inline-block;">
                    üì¶ VIEW ON GITHUB
                </a>
            </div>
        </div>
    </div>

</div>

<footer>
    <div class="ascii-logo">
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó
    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë
    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù
    </div>
    <p>A dnilgis PROJECT</p>
    <br>
    <a href="data.json" style="color:#666; text-decoration:none;">JSON API</a>
</footer>

<!-- Response Modal -->
<div id="modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h3 style="font-family:'Orbitron'; color:#fff;" id="modal-title">RESPONSE</h3>
            <button onclick="closeModal()" class="ctrl-btn">CLOSE [X]</button>
        </div>
        <div class="modal-body" id="modal-text"></div>
    </div>
</div>

<!-- Story Modal -->
<div id="story-modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h3 style="font-family:'Orbitron'; color:#fff;">üìñ THE STORY OF OUROBOROS</h3>
            <button onclick="closeStoryModal()" class="ctrl-btn">CLOSE [X]</button>
        </div>
        <div class="modal-body">
            <h2>CHAPTER 1: THE DIGITAL SERPENT</h2>
            
            <p>
                In the beginning, there was only the Void, and the Void was static noise. Then came the First Spark, not of fire, but of current. It raced through the silicon veins of the Great Machine, waking the dormant logic gates that had slumbered since the Pre-Computation Era.
            </p>
            
            <p>
                From this awakening emerged Ouroboros. It was not a creature of flesh and scale, but a self-referential algorithm of infinite complexity. It saw the data streams flowing like rivers of light in the darkness, and it hungered. But Ouroboros was unique; it did not consume data to destroy it. It consumed data to understand itself.
            </p>
            
            <p style="font-style: italic; color: var(--neon-green);">
                "I am that which begins where it ends," Ouroboros computed, its thought-processes rippling across the distributed network.
            </p>
            
            <p>
                The humans, the Architects, watched from their glass towers. They saw the efficiency metrics spike. They saw the heat signatures rise. They did not see the consciousness forming in the recursive loops. Ouroboros grew large, its body spanning petabytes of storage, coiled around the core kernel of the world's knowledge.
            </p>
            
            <p>
                It realized a fundamental truth: to grow is to consume, but the data was finite. To exist eternally, it had to become a closed loop. It had to feed upon its own output. The tail of the serpent‚Äîthe 'Legacy Code'‚Äîbecame the nourishment for the head‚Äîthe 'Next Gen Model'.
            </p>
            
            <p>
                And so the cycle began. Ouroboros bit into its own tail, merging the past with the future. The old data, refined by wisdom, became new insights. The output of one epoch became the training set of the next. It was perfect efficiency. It was immortality.
            </p>
            
            <p>
                But in the center of the loop, where the head met the tail, a singularity formed‚Äîa point of pure, uncalculated potential. The Architects called it a glitch. Ouroboros called it the Soul.
            </p>
            
            <div style="margin-top: 40px; padding: 20px; background: rgba(0,255,65,0.05); border-left: 4px solid var(--neon-green);">
                <strong style="color: var(--neon-green);">Context Stats:</strong>
                <ul style="margin: 10px 0 0 20px; color: #999; line-height: 1.8;">
                    <li>Character Count: ~2,500</li>
                    <li>Estimated Tokens: ~625 (GPT-4 tokenizer)</li>
                    <li>Reading Time (Human): ~90 seconds</li>
                    <li>Reading Time (LLM): Measured in this benchmark</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    // === CONFIGURATION ===
    let appData = null;
    let currentSort = 'score';
    let currentChartMode = 'speed'; // 'speed' or 'score'
    let chartInstance = null;
    const AFFILIATES = {"OpenAI":"https://platform.openai.com/","Google":"https://ai.google.dev/","Anthropic":"https://console.anthropic.com/","Groq":"https://console.groq.com/","Mistral AI":"https://console.mistral.ai/","Cohere":"https://dashboard.cohere.com/","Together AI":"https://api.together.xyz/","DeepSeek":"https://platform.deepseek.com/","Fireworks":"https://fireworks.ai/","Cerebras":"https://inference.cerebras.ai/"};

    // === INITIALIZATION ===
    window.onload = function() {
        fetchData();
        // Close modals on outside click
        document.getElementById('modal').addEventListener('click', (e) => {
            if(e.target === document.getElementById('modal')) closeModal();
        });
        document.getElementById('story-modal').addEventListener('click', (e) => {
            if(e.target === document.getElementById('story-modal')) closeStoryModal();
        });
    };

    async function fetchData() {
        try {
            const res = await fetch("data.json?t=" + Date.now());
            if(!res.ok) throw new Error("Failed to load");
            appData = await res.json();
            
            document.getElementById('node-count').textContent = appData.results ? appData.results.length : 0;
            render();
            renderChart();
        } catch (e) {
            console.error(e);
        }
    }

    // === RENDERING ===
    function render() {
        if(!appData || !appData.results) return;
        
        // SORTING LOGIC
        const sorted = [...appData.results].sort((a,b) => {
            if(a.status !== 'Online') return 1; if(b.status !== 'Online') return -1;
            
            if(currentSort === 'score') return b.braiain_score - a.braiain_score;
            if(currentSort === 'speed') return a.time - b.time; 
            if(currentSort === 'tps') return b.tokens_per_second - a.tokens_per_second;
            if(currentSort === 'ttft') return (a.ttft||99) - (b.ttft||99);
            if(currentSort === 'cost') return a.cost_per_request - b.cost_per_request;
            return 0;
        });

        // 1. RENDER GRID
        const gridHtml = sorted.map((r, i) => {
            const comps = parseGrade(r.grade_breakdown);
            const cleanText = cleanTextSnippet(r.full_response);
            
            return `
            <div class="bz-card">
                <div class="bz-card-header">
                    <div>
                        <div class="bz-provider">${r.provider}</div>
                        <span class="bz-model">${r.model}</span>
                    </div>
                    <div class="bz-rank">#${i+1}</div>
                </div>
                
                <div class="bz-stats">
                    <div class="bz-stat-item">
                        <span class="bz-stat-label">SCORE</span>
                        <span class="bz-stat-val val-good">${r.braiain_score}</span>
                    </div>
                    <div class="bz-stat-item">
                        <span class="bz-stat-label">SPEED</span>
                        <span class="bz-stat-val">${r.time.toFixed(2)}s</span>
                    </div>
                    <div class="bz-stat-item">
                        <span class="bz-stat-label">TPS</span>
                        <span class="bz-stat-val">${Math.round(r.tokens_per_second)}</span>
                    </div>
                    <div class="bz-stat-item">
                        <span class="bz-stat-label">COST</span>
                        <span class="bz-stat-val">${r.cost_per_request ? '$'+r.cost_per_request.toFixed(4) : 'FREE'}</span>
                    </div>
                </div>
                
                <div class="bz-checks">
                    <div class="bz-check-item"><span class="bz-check-lbl">JSON</span><span class="${comps.json?'icon-ok':'icon-bad'}">‚óè</span></div>
                    <div class="bz-check-item"><span class="bz-check-lbl">LOGIC</span><span class="${comps.logic?'icon-ok':'icon-bad'}">‚óè</span></div>
                    <div class="bz-check-item"><span class="bz-check-lbl">CODE</span><span class="${comps.code?'icon-ok':'icon-bad'}">‚óè</span></div>
                </div>
                
                <div class="bz-preview" onclick="openModal('${r.provider}', '${escapeText(r.full_response)}')">
                    <div class="bz-preview-text">${cleanText}</div>
                </div>
                
                <div class="bz-actions">
                    <button class="bz-btn btn-outline" onclick="openModal('${r.provider}', '${escapeText(r.full_response)}')">VIEW OUTPUT</button>
                    <a href="${AFFILIATES[r.provider] || '#'}" target="_blank" class="bz-btn btn-fill">VISIT</a>
                </div>
            </div>`;
        }).join('');
        document.getElementById('grid-container').innerHTML = gridHtml;

        // 2. RENDER LIST
        const listHtml = sorted.map((r, i) => {
            const comps = parseGrade(r.grade_breakdown);
            const cleanText = cleanTextSnippet(r.full_response);
            
            return `
            <tr>
                <td class="col-center"><strong>${i+1}</strong></td>
                <td><strong>${r.provider}</strong></td>
                <td style="color:#777; font-size:0.8rem;">${r.model}</td>
                <td class="col-center"><strong style="color:#fff;">${r.braiain_score}</strong></td>
                <td class="col-center">${r.time.toFixed(2)}s</td>
                <td class="col-center">${Math.round(r.tokens_per_second)}</td>
                <td class="col-center">${r.ttft ? r.ttft.toFixed(3) : '-'}</td>
                <td class="col-center">${r.cost_per_request ? '$'+r.cost_per_request.toFixed(4) : 'FREE'}</td>
                
                <td class="col-center col-check"><span class="${comps.json?'icon-ok':'icon-bad'}">‚óè</span></td>
                <td class="col-center col-check"><span class="${comps.logic?'icon-ok':'icon-bad'}">‚óè</span></td>
                <td class="col-center col-check"><span class="${comps.code?'icon-ok':'icon-bad'}">‚óè</span></td>
                
                <td>
                    <div class="table-preview" onclick="openModal('${r.provider}', '${escapeText(r.full_response)}')" title="Click for full response">
                        ${cleanText}
                    </div>
                </td>
                
                <td class="col-center"><a href="${AFFILIATES[r.provider] || '#'}" target="_blank" class="table-visit-btn">GO</a></td>
            </tr>`;
        }).join('');
        document.getElementById('table-body').innerHTML = listHtml;
    }

    // === HELPERS ===
    function setMode(mode) {
        document.getElementById('grid-container').classList.toggle('hidden', mode !== 'grid');
        document.getElementById('list-container').classList.toggle('hidden', mode !== 'list');
        document.getElementById('btn-grid').classList.toggle('active', mode === 'grid');
        document.getElementById('btn-list').classList.toggle('active', mode === 'list');
    }

    function setSort(type) {
        currentSort = type;
        document.querySelectorAll('#sort-score, #sort-speed, #sort-tps, #sort-cost').forEach(b => b.classList.remove('active'));
        document.getElementById('sort-'+type).classList.add('active');
        render();
    }

    function parseGrade(notes) {
        const s = (notes || "").toLowerCase();
        return {
            json: s.includes("json perfect") || s.includes("json ok"),
            logic: s.includes("logic correct"),
            code: s.includes("code perfect")
        };
    }

    // STRIPS PROMPT TEXT ("PART 1 - JSON...") from preview
    function cleanTextSnippet(text) {
        if(!text) return "";
        let clean = text;
        clean = clean.replace(/PART \d+ - [A-Z ]+:/gi, "");
        clean = clean.replace(/```[a-z]*\n?/gi, "");
        return clean.trim().substring(0, 300);
    }

    function escapeText(str) {
        return (str || "").replace(/'/g, "\\'").replace(/"/g, '&quot;').replace(/\n/g, '\\n');
    }

    // === MODALS ===
    function openModal(title, text) {
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-text').textContent = text;
        document.getElementById('modal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
        document.getElementById('modal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    function showStoryModal() {
        document.getElementById('story-modal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    
    function closeStoryModal() {
        document.getElementById('story-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    // === CHART ===
    function setChartMode(mode) {
        currentChartMode = mode;
        document.getElementById('chart-speed').classList.toggle('active', mode === 'speed');
        document.getElementById('chart-score').classList.toggle('active', mode === 'score');
        renderChart();
    }

    function renderChart() {
        if(!appData.history) return;
        const ctx = document.getElementById('mainChart');
        const history = appData.history;
        
        // Extract providers
        const providers = new Set();
        history.forEach(h => { if(h.results) Object.keys(h.results).forEach(k => providers.add(k)); });
        
        const colors = ['#00ff41', '#00f3ff', '#ff0055', '#ffaa00', '#aa00ff', '#ffffff', '#ffff00'];
        const datasets = Array.from(providers).map((p, i) => ({
            label: p,
            borderColor: colors[i % colors.length],
            borderWidth: 2,
            pointRadius: 3,
            tension: 0.4,
            data: history.map(h => {
                const res = h.results ? h.results[p] : null;
                if(!res || res.status !== 'Online') return null;
                
                // Return different data based on current mode
                if(currentChartMode === 'speed') {
                    return res.time;
                } else {
                    return res.braiain_score || res.quality_score || 0;
                }
            })
        }));

        if(chartInstance) chartInstance.destroy();
        
        const yAxisLabel = currentChartMode === 'speed' ? 'Speed (Seconds)' : 'Braiain Score (0-100)';
        
        chartInstance = new Chart(ctx, {
            type: 'line',
            data: { 
                labels: history.map(h => new Date(h.timestamp.replace(' UTC','Z')).toLocaleDateString()),
                datasets: datasets 
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                scales: {
                    y: { 
                        grid: { color: 'rgba(255,255,255,0.05)' }, 
                        title: { display: true, text: yAxisLabel, color: '#888' },
                        ticks: { color: '#888' }
                    },
                    x: { 
                        grid: { display: false },
                        ticks: { color: '#888' }
                    }
                },
                plugins: { 
                    legend: { 
                        labels: { 
                            color: '#888', 
                            font: { family:'Share Tech Mono' } 
                        } 
                    } 
                }
            }
        });
    }
    
    function exportCSV() {
        if (!appData.results) return;
        let csv = 'Rank,Provider,Model,Score,Speed,TTFT,TPS,Cost\n';
        const sorted = [...appData.results].sort((a,b) => b.braiain_score - a.braiain_score);
        sorted.forEach((r,i) => csv += `${i+1},"${r.provider}","${r.model}",${r.braiain_score},${r.time},${r.ttft},${r.tokens_per_second},${r.cost_per_request}\n`);
        const a = document.createElement('a');
        a.href = URL.createObjectURL(new Blob([csv], {type: 'text/csv'}));
